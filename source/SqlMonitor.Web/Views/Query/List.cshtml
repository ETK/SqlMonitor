@model IEnumerable<SqlMonitor.Core.Domain.Query>

@{
    ViewBag.Title = "Query List";
}

<h2>Query List <span class="float-right">@Html.ActionLink("New Query", "Create")</span></h2>

<table style="width: 100%">
    <tr>
        <th>
            Name
        </th>
        <th>
            Database Name
        </th>
        <th>
            Last Run
        </th>
        <th>
            Next Run
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
             @Html.ActionLink(@item.Name, "Details", new { id = item.QueryId })
        </td>
        <td>
            @item.DatabaseName
        </td>
        <td>
            @String.Format("{0:g}", item.LastRun)
        </td>
         <td>
            @String.Format("{0:g}", item.NextRun)
        </td>
        <td>
            @Html.ActionLink("Delete", "Delete", new { id=item.QueryId })
        </td>
    </tr>
}

</table>

<div class="clear20"></div>
@Html.Partial("GraphBuilder")